<?php
/**
 * Admin configuration view
 * @package Fizzy
 * @subpackage Views
 *
 * LICENSE
 *
 * This source file is subject to the new BSD license that is bundled
 * with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.voidwalkers.nl/license/new-bsd
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@voidwalkers.nl so we can send you a copy immediately.
 *
 * @copyright Copyright (c) 2009 Voidwalkers (http://www.voidwalkers.nl)
 * @license http://www.voidwalkers.nl/license/new-bsd The New BSD License
 */
 ?>
<h1>Configuration</h1>
<p>
    The configuration below is loaded when Fizzy starts. For an overview of the
    fizzy configuration settings see <a href="http://project.voidwalkers.nl/wiki/fizzy/Configuration">the manual</a>. <br />
    These settings can be changed in the files found under 
    <span class="code-inline"><?= Fizzy_Config::getInstance()->getPath('configs') ?></span>.
</p>

<a href="#" id="expand">Expand all</a> | <a href="#" id="collapse">Collapse all</a>
<div id="config-browser">
<ul>
    <?= arrayToList($this->configuration); ?>
</ul>
</div>

<script type="text/javascript" src="<?= $this->url('/js/yui/build/treeview/treeview-min.js'); ?>"></script>
<script type="text/javascript">
    var treeInit = function() {
        var tree = new YAHOO.widget.TreeView("config-browser");
        tree.render();
        
        YAHOO.util.Event.on("collapse", "click", function(e) {
                tree.collapseAll();
                YAHOO.util.Event.preventDefault(e);
        });

        YAHOO.util.Event.on("expand", "click", function(e) {
                tree.expandAll();
                YAHOO.util.Event.preventDefault(e);
        });

    };
    YAHOO.util.Event.onDOMReady(treeInit);
</script>


<?php
function arrayToList($array) {
    
    foreach($array as $key => $value) {
        $list .= "<li>\n";
        $list .= "{$key}\n";
        $list .= "<ul>\n";
        
        if(is_array($value)) {
            $list .= arrayToList($value);
        }
        else {
            $list .= "<li>{$value}</li>\n";
        }

        $list .= "</ul>\n";
        $list .= "</li>\n";
    }

    return $list;
}
?>
